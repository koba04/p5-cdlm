<!DOCTYPE html>
<head>
<meta charset="utf-8">
<title>CountDown LastFM Ranking (<: $country :>)</title>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.5.0/jquery.min.js"></script>
<script src="https://ajax.googleapis.com/ajax/libs/swfobject/2.2/swfobject.js"></script>
<script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.8.11/jquery-ui.min.js"></script>
<link rel="stylesheet" href="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8.11/themes/blitzer/jquery-ui.css" />
<script src="/cdlm/js/base.js"></script>
<link rel="stylesheet" href="/cdlm/css/base.css" />
: include include::google_analytics
</head>
<body>
<script>
var video_list = [];
var index = 0;
var loading = false;
jQuery(function($) {
    $("#prev").click(function(){
        prev();
    });
    $("#next").click(function(){
        next();
    });
    $("#show").click(function() {
        show();
    });
    $("#content").tabs();
    var country = "<: $country :>";
    get_list(country);
});
function onYouTubePlayerReady(playerId) {
    document.getElementById(playerId).addEventListener("onStateChange", "onytplayerStateChange");
}

function onytplayerStateChange(newState) {
    // 削除動画を読み込むと止まってしまう対策
    switch (newState) {
        case 0:     // 終了
            next();
            break;
        case 1:     // 再生中
            loading = false;
            break;
        case 2:     // 一時停止中
            if ( loading ) {
                $("#trac_" + video_list[index].rank).append("<em>=&gt; Can't Play!!!</em>");
                next();
            }
            loading = false;
            break;
        case 3:     // バッファリング中
            loading = true;
            break;
    }
}
</script>
<header>
<h1>CountDown LastFM Ranking (<: $country :>)</h1>
</header>
<article>
<div id="content">
    <ul>
    <li><a href="#play">Video</a></li>
    <li><a href="#list">Chart</a></li>
    <li><a href="#other">Other</a></li>
    </ul>
    <div id="play">
        <span id="info"></span>
        <div id="next_song"></div>
    </div>
    <div id="list"></div>
    <div id="other">
        <p>Do You Want to Play Which Countries Ranking ??</p>
        <ul class=".ui-icon-play">
        : $country == "jp" ? '<li>Japan</li>' | raw : '<li><a href="jp">Japan</a></li>' | raw
        : $country == "us" ? "<li>United States</li>" | raw : '<li><a href="us">United States</a></li>' | raw
        : $country == "uk" ? "<li>United Kingdom</li>" | raw : '<li><a href="uk">United Kingdom</a></li>' | raw
        </ul>
    </div>
    <div id="current"></div>
    <div id="video"></div>
    <div id="operation" >
        <input type="button"  id="prev" value="Prev" />
        <input type="button"  id="next" value="Next" />
    </div>
</div>
</article>
<footer>
created by koba04. powered by Youtube &amp; Last.fm
</footer>
</body>
</html>

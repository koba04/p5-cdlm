(function(){"use strict";var n,t,i=[],a=50,e=a,s=!0,o=function(){$("#list").children().css("color","black"),$("#trac_"+i[e].rank).css("color","red")},r=function(r,c){for(c&&(e=c);!i[e]||!i[e].video;)if("prev"===r){if(e>=a)return;++e}else{if(1>=e)return;--e}s||t.loadVideoById(i[e].video.id);var l='<div class="track">';if(l+='<span class="rank">'+i[e].rank+"&nbsp;</span>",l+='<span class="info">'+i[e].info.artist.name+" / "+i[e].info.name+"</span><br />",i[e].video&&(l+='<span class="video_info">('+i[e].video.title+")</span>",$("title").text(i[e].video.title)),l+="</div>",$("#current").html(l),i[e].rank>1){var d=e-1,v="";i[d].video&&(v='<div id="next_img"><img src="'+i[d].video.thumbnail.sqDefault+'" width="120" height="90" /></div>'),v+='<div class="next_track">',v+='<span class="rank">'+i[d].rank+"&nbsp;</span>",v+='<span class="info">'+i[d].info.artist.name+" / "+i[d].info.name+"</span><br />",i[d].video&&(v+='<span class="video_info">('+i[d].video.title+")</span>"),v+="</div>",$("#next_song").html(v)}else $("#next_song").html("");o(),history.replaceState(null,"CDLM "+n+":"+e,"/track/"+n+"/"+e)},c=function(){1>=e||(--e,r("next"))},l=function(){e>=a||(++e,r("prev"))},d=function(a,l){n=a,l&&(e=l),$.getJSON("/track/"+n+".json",{},function(n){var a="",d=!1;$.each(n.reverse(),function(){i[this.rank]=this,a+='<div id="trac_"'+this.rank+'" class="track">',a+='<span class="rank">'+this.rank+"&nbsp;</span>",a+='<span class="info">'+this.info.artist.name+" / "+this.info.name+"</span><br />",this.video&&(a+='<span class="video_info">('+this.video.title+")</span>",a+='<input type="button" id="button_trac_'+this.rank+'" value="play" class="play_button" />',d||l||(e=this.rank,d=!0)),a+="</div>"}),$("#list").html(a),o(),$(".play_button").click(function(){var n=$(this).attr("id");n=n.replace(/button_trac_/,""),r("next",n)});var v=document.createElement("script");v.src="//www.youtube.com/iframe_api";var u=document.getElementsByTagName("script")[0];u.parentNode.insertBefore(v,u),window.onYouTubeIframeAPIReady=function(){t=new YT.Player("video",{height:450,width:800,videoId:i[e].video.id,events:{onStateChange:function(n){var t=n.data;t===YT.PlayerState.ENDED&&c()},onError:function(){c()}}})},r("next"),s=!1})};jQuery(function(n){n("#prev").click(function(){l()}),n("#next").click(function(){c()}),n("#show").click(function(){window.show()}),n("#content").tabs(),d(n("meta[name=country]").attr("content"),n("meta[name=rank]").attr("content"))})})();
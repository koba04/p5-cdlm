(function(){jQuery(function(n){"use strict";var t,e,i,a,r,s,o,c,u,l,d;return d=[],l=50,a=l,t="",c="",r=!0,i=function(){return n("#list").children().css("color","black"),n("#trac_"+d[a].rank).css("color","red")},o=function(e,s){var o,u,v;for(s&&(a=s);!d[a]||!d[a].video;)if("prev"===e){if(a>=l)return;++a}else{if(1>=a)return;--a}return r||c.loadVideoById(d[a].video.id),o='<div class="track">',o+='<span class="rank">'+d[a].rank+"&nbsp</span>",o+='<span class="info">'+d[a].info.artist.name+" / "+d[a].info.name+"</span><br />",d[a].video&&(o+='<span class="video_info">('+d[a].video.title+")</span>",n("title").text(d[a].video.title)),o+="</div>",n("#current").html(o),d[a].rank>1?(u=a-1,v="",d[u].video&&(v='<div id="next_img"><img src="'+d[u].video.thumbnail.sqDefault+'" width="120" height="90" /></div>'),v+='<div class="next_track">',v+='<span class="rank">'+d[u].rank+"&nbsp</span>",v+='<span class="info">'+d[u].info.artist.name+" / "+d[u].info.name+"</span><br />",d[u].video&&(v+='<span class="video_info">('+d[u].video.title+")</span>"),v+="</div>",n("#next_song").html(v)):n("#next_song").html(""),i(),history.replaceState(null,"CDLM "+t+":"+a,"/track/"+t+"/"+a)},s=function(){return 1>=a?void 0:(--a,o("next"))},u=function(){return a>=l?void 0:(++a,o("prev"))},e=function(e,u){return t=e,u&&(a=u),n.getJSON("/track/"+t+".json",{},function(t){var e,l,v,f;return l="",v=!1,n.each(t.reverse(),function(){return d[this.rank]=this,l+='<div id="trac_"'+this.rank+'" class="track">',l+='<span class="rank">'+this.rank+"&nbsp</span>",l+='<span class="info">'+this.info.artist.name+" / "+this.info.name+"</span><br />",this.video&&(l+='<span class="video_info">('+this.video.title+")</span>",l+='<input type="button" id="button_trac_'+this.rank+'" value="play" class="play_button" />',v||u||(a=this.rank,v=!0)),l+="</div>"}),n("#list").html(l),i(),n(".play_button").click(function(){var t;return t=n(this).attr("id"),t=t.replace(/button_trac_/,""),o("next",t)}),f=document.createElement("script"),f.src="//www.youtube.com/iframe_api",e=document.getElementsByTagName("script")[0],e.parentNode.insertBefore(f,e),window.onYouTubeIframeAPIReady=function(){return c=new YT.Player("video",{height:"425",width:"760",videoId:d[a].video.id,events:{onStateChange:function(n){var t;return t=n.data,t===YT.PlayerState.ENDED?s():void 0},onError:function(){return s()}}})},o("next"),r=!1})},n("#prev").click(function(){return u()}),n("#next").click(function(){return s()}),n("#show").click(function(){return window.show()}),n("#content").tabs(),e(n("meta[name=country]").attr("content"),n("meta[name=rank]").attr("content"))})}).call(this);